<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <title>اپلیکیشن 724</title>

    <meta charset="utf-8" />

    <meta http-equiv="x-ua-compatible" content="ie=edge,10,11" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0"
    />
    <meta name="description" content="" />
    <meta name="robots" content="" />
    <meta name="language" content="" />
    <meta name="theme-color" content="#ffffff" />
    <meta name="referrer" content="origin-when-cross-origin" />

    <meta property="twitter:card" content="" />
    <meta property="twitter:url" content="" />
    <meta property="twitter:title" content="" />
    <meta property="twitter:description" content="" />
    <meta property="twitter:image" content="" />

    <meta property="og:locale" content="" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="" />
    <meta property="og:description" content="" />
    <meta property="og:url" content="" />
    <meta property="og:site_name" content="" />
    <meta property="og:image" content="" />

    <link href="dist/ui/img/favicon/mask-icon.svg" rel="mask-icon" color="#" />
    <link
      href="dist/ui/img/favicon/apple-touch-icon-precomposed.png"
      rel="apple-touch-icon-precomposed"
    />
    <link href="dist/ui/img/favicon/favicon.ico" rel="icon" sizes="any" />
    <link
      href="dist/ui/img/favicon/favicon-192x192.png"
      rel="icon"
      sizes="192x192"
      type="image/png"
    />
    <link
      href="dist/ui/img/favicon/favicon.svg"
      rel="icon"
      type="image/svg+xml"
    />

    <link href="../../cdn/pkg/uikit/css/uikit-rtl.min.css" rel="stylesheet" />
    <link href="../../cdn/pkg/sep/uikit/css/override.css" rel="stylesheet" />
    <link
      href="../../cdn/pkg/tabler/css/tabler-icons.min.css"
      rel="stylesheet"
    />
    <link href="../../cdn/pkg/vazir/css/font-face.css" rel="stylesheet" />
    <link href="../../cdn/pkg/dana/css/font-face.css" rel="stylesheet" />
    <link href="../../cdn/pkg/estedad/css/font-face.css" rel="stylesheet" />

    <link href="dist/ui/css/style.css" rel="stylesheet" />

    <script src="../../cdn/pkg/uikit/js/uikit.min.js" as="script"></script>
  </head>

  <body>
    <div class="uk-position-relative uk-overflow-hidden">
      <!-- #header -->
      <header
        class="uk-navbar-container uk-navbar-transparent"
        uk-sticky="sel-target: .uk-navbar-container; cls-active: ui-navbar-sticky;"
      >
        <div class="uk-container">
          <nav class="uk-navbar" uk-navbar="mode: click;">
            <div class="uk-navbar-right">
              <a href="" target="_self" class="uk-navbar-item uk-logo">
                <img
                  src="dist/ui/img/logo-724.svg"
                  width="72"
                  height="72"
                  alt="اپلیکیشن پرداخت ۷۲۴"
                  class="uk-preserve"
                  uk-svg
                />
                <span
                  class="uk-display-inline-block uk-margin-small-right uk-text-meta uk-hidden@m"
                  >۷ روز هفته، ۲۴ ساعت شبانه‌روز</span
                >
              </a>
            </div>
            <div class="uk-navbar-right uk-margin-right uk-visible@m">
              <ul class="uk-navbar-nav uk-text-nowrap">
                <li>
                  <a href="" target="_self">سرویس‌ها</a>
                  <div class="uk-navbar-dropdown ui-navbar-dropdown">
                    <ul class="uk-nav uk-navbar-dropdown-nav">
                      <li>
                        <a href="" target="_self">
                          <img
                            src="dist/ui/img/icon/app/ic-finance.svg"
                            width="24"
                            height="24"
                            alt="سرویس‌های بانکی"
                            class="uk-preserve uk-margin-small-left"
                            uk-svg
                          />
                          <span>بانکی</span>
                          <i class="ti ti-chevron-left ui-nav-parent-icon"></i>
                        </a>
                        <div class="uk-navbar-dropdown ui-navbar-sub-dropdown">
                          <ul
                            class="uk-nav uk-navbar-dropdown-nav uk-flex uk-flex-column uk-flex-wrap uk-height-1-1"
                          >
                            <li>
                              <a href="#" target="_self">
                                <img
                                  src="dist/ui/img/icon/app/ic-card.svg"
                                  width="24"
                                  height="24"
                                  alt="سرویس کارت به کارت"
                                  class="uk-preserve uk-margin-small-left"
                                  uk-svg
                                />
                                <span>کارت به کارت</span>
                              </a>
                            </li>
                            <li>
                              <a href="" target="_self">
                                <img
                                  src="dist/ui/img/icon/app/ic-fiat.svg"
                                  width="24"
                                  height="24"
                                  alt="سرویس موجودی"
                                  class="uk-preserve uk-margin-small-left"
                                  uk-svg
                                />
                                <span>موجودی</span>
                              </a>
                            </li>
                            <li>
                              <a href="" target="_self">
                                <img
                                  src="dist/ui/img/icon/app/ic-cheque.svg"
                                  width="24"
                                  height="24"
                                  alt="سرویس چک صیاد"
                                  class="uk-preserve uk-margin-small-left"
                                  uk-svg
                                />
                                <span>چک صیاد</span>
                              </a>
                            </li>
                            <li>
                              <a href="" target="_self">
                                <img
                                  src="dist/ui/img/icon/app/ic-validation.svg"
                                  width="24"
                                  height="24"
                                  alt="سرویس اعتبارسنجی"
                                  class="uk-preserve uk-margin-small-left"
                                  uk-svg
                                />
                                <span>اعتبارسنجی</span>
                              </a>
                            </li>
                          </ul>
                        </div>
                      </li>
                      <li>
                        <a href="" target="_self">
                          <img
                            src="dist/ui/img/icon/app/ic-mobile.svg"
                            width="24"
                            height="24"
                            alt="سرویس‌های موبایل"
                            class="uk-preserve uk-margin-small-left"
                            uk-svg
                          />
                          <span>موبایل</span>
                          <i class="ti ti-chevron-left ui-nav-parent-icon"></i>
                        </a>
                        <div class="uk-navbar-dropdown ui-navbar-sub-dropdown">
                          <ul
                            class="uk-nav uk-navbar-dropdown-nav uk-flex uk-flex-column uk-flex-wrap uk-height-1-1"
                          >
                            <li>
                              <a href="#" target="_self">
                                <img
                                  src="dist/ui/img/icon/app/ic-card.svg"
                                  width="24"
                                  height="24"
                                  alt="سرویس کارت به کارت"
                                  class="uk-preserve uk-margin-small-left"
                                  uk-svg
                                />
                                <span>کارت به کارت</span>
                              </a>
                            </li>
                            <li>
                              <a href="" target="_self">
                                <img
                                  src="dist/ui/img/icon/app/ic-fiat.svg"
                                  width="24"
                                  height="24"
                                  alt="سرویس موجودی"
                                  class="uk-preserve uk-margin-small-left"
                                  uk-svg
                                />
                                <span>موجودی</span>
                              </a>
                            </li>
                            <li>
                              <a href="" target="_self">
                                <img
                                  src="dist/ui/img/icon/app/ic-cheque.svg"
                                  width="24"
                                  height="24"
                                  alt="سرویس چک صیاد"
                                  class="uk-preserve uk-margin-small-left"
                                  uk-svg
                                />
                                <span>چک صیاد</span>
                              </a>
                            </li>
                            <li>
                              <a href="" target="_self">
                                <img
                                  src="dist/ui/img/icon/app/ic-validation.svg"
                                  width="24"
                                  height="24"
                                  alt="سرویس اعتبارسنجی"
                                  class="uk-preserve uk-margin-small-left"
                                  uk-svg
                                />
                                <span>اعتبارسنجی</span>
                              </a>
                            </li>
                            <li>
                              <a href="#" target="_self">
                                <img
                                  src="dist/ui/img/icon/app/ic-card.svg"
                                  width="24"
                                  height="24"
                                  alt="سرویس کارت به کارت"
                                  class="uk-preserve uk-margin-small-left"
                                  uk-svg
                                />
                                <span>کارت به کارت</span>
                              </a>
                            </li>
                            <li>
                              <a href="" target="_self">
                                <img
                                  src="dist/ui/img/icon/app/ic-fiat.svg"
                                  width="24"
                                  height="24"
                                  alt="سرویس موجودی"
                                  class="uk-preserve uk-margin-small-left"
                                  uk-svg
                                />
                                <span>موجودی</span>
                              </a>
                            </li>
                            <li>
                              <a href="" target="_self">
                                <img
                                  src="dist/ui/img/icon/app/ic-cheque.svg"
                                  width="24"
                                  height="24"
                                  alt="سرویس چک صیاد"
                                  class="uk-preserve uk-margin-small-left"
                                  uk-svg
                                />
                                <span>چک صیاد</span>
                              </a>
                            </li>
                            <li>
                              <a href="" target="_self">
                                <img
                                  src="dist/ui/img/icon/app/ic-validation.svg"
                                  width="24"
                                  height="24"
                                  alt="سرویس اعتبارسنجی"
                                  class="uk-preserve uk-margin-small-left"
                                  uk-svg
                                />
                                <span>اعتبارسنجی</span>
                              </a>
                            </li>
                          </ul>
                        </div>
                      </li>
                      <li>
                        <a href="" target="_self">
                          <img
                            src="dist/ui/img/icon/app/ic-bill.svg"
                            width="24"
                            height="24"
                            alt="سرویس‌های قبض"
                            class="uk-preserve uk-margin-small-left"
                            uk-svg
                          />
                          <span>قبض</span>
                          <i class="ti ti-chevron-left ui-nav-parent-icon"></i>
                        </a>
                      </li>
                      <li>
                        <a href="" target="_self">
                          <img
                            src="dist/ui/img/icon/app/ic-car.svg"
                            width="24"
                            height="24"
                            alt="سرویس‌های خودرو"
                            class="uk-preserve uk-margin-small-left"
                            uk-svg
                          />
                          <span>خودرو</span>
                          <i class="ti ti-chevron-left ui-nav-parent-icon"></i>
                        </a>
                      </li>
                      <li>
                        <a href="" target="_self">
                          <img
                            src="dist/ui/img/icon/app/ic-sep.svg"
                            width="24"
                            height="24"
                            alt="سرویس‌های سپ"
                            class="uk-preserve uk-margin-small-left"
                            uk-svg
                          />
                          <span>سپ</span>
                          <i class="ti ti-chevron-left ui-nav-parent-icon"></i>
                        </a>
                      </li>
                      <li>
                        <a href="" target="_self">
                          <img
                            src="dist/ui/img/icon/app/ic-showcase.svg"
                            width="24"
                            height="24"
                            alt="سایر سرویس‌ها"
                            class="uk-preserve uk-margin-small-left"
                            uk-svg
                          />
                          <span>سایر</span>
                          <i class="ti ti-chevron-left ui-nav-parent-icon"></i>
                        </a>
                      </li>
                    </ul>
                  </div>
                </li>
                <li>
                  <a target="_self">رویدادها</a>
                </li>
                <li>
                  <a target="_self">سوالات متداول</a>
                </li>
                <li>
                  <a target="_self">درباره ما</a>
                </li>
                <li>
                  <a target="_self">تماس با ما</a>
                </li>
              </ul>
            </div>
            <div class="uk-navbar-left">
              <div class="uk-flex uk-flex-center uk-flex-middle uk-text-nowrap">
                <a
                  href=""
                  target="_blank"
                  class="uk-button ui-button-gray uk-padding-small uk-padding-remove-vertical uk-border-pill uk-visible@l uk-margin-small-left"
                >
                  <span class="uk-text-default">خرید شارژ</span>
                </a>
                <a
                  href=""
                  target="_blank"
                  class="uk-button ui-button-gray uk-padding-small uk-padding-remove-vertical uk-border-pill uk-visible@l uk-margin-small-left"
                >
                  <span class="uk-text-default">خرید بسته اینترنت</span>
                </a>
                <a
                  href=""
                  target="_blank"
                  class="uk-button ui-button-gray uk-padding-small uk-padding-remove-vertical uk-border-pill uk-visible@l uk-margin-small-left"
                >
                  <span class="uk-text-default">پرداخت قبض</span>
                </a>
                <a
                  href=""
                  target="_blank"
                  class="uk-button uk-button-primary uk-padding-small uk-padding-remove-vertical uk-border-pill uk-visible@m"
                >
                  <i class="ti ti-download uk-margin-small-left"></i
                  ><span class="uk-text-default">دریافت اپلیکیشن</span>
                </a>
                <a
                  href="#"
                  class="uk-navbar-toggle uk-hidden@m"
                  uk-toggle="target: #sidenav"
                >
                  <i class="ti ti-menu-2"></i>
                </a>
              </div>
            </div>
          </nav>
        </div>
      </header>

      <!--  Successful Transaction Receipt  -->
      <div class="uk-section">
        <div class="uk-container">
          <div class="uk-flex uk-flex-middle uk-flex-center">
            <div
              class="uk-card uk-card-default uk-card-body uk-width-2-3@s uk-width-1-2@m uk-border-rounded-large uk-flex uk-flex-middle uk-flex-center"
            >
              <div class="uk-width-4-5@m" id="ReceiptContainer"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script id="ServiceError" type="text/template">
      <div class="uk-margin-medium-top uk-text-center">
         <p class="uk-text-danger">خطا در دریافت اطلاعات از سرویس</p>
           <div class="uk-margin-small-top uk-text-center">
             <button onclick="location.reload()"
             class="uk-button uk-button-primary uk-border-rounded ">
               <i class="ti ti-reload"></i>
                 تلاش مجدد
             </button>
           </div>
         </div>
    </script>

    <!-- receipt template scripts  -->
    <script id="SuccessReceiptTemplate" type="text/template">
      <div class="uk-panel uk-margin-top">
                <div
                  class="uk-border-rounded uk-width-expand uk-text-center uk-margin-bottom
                         uk-flex uk-flex-column uk-flex-middle uk-flex-center ui-bg-light-green">
                  <div
                      class="uk-text-center uk-width-max-content uk-border-rounded uk-text-white ui-success-receipt-title">
                      <i class="ti ti-circle-check-filled"></i>
                      تراکنش موفق
                    </div>
                  <p class="uk-text-large uk-padding-small fontface-vazir-fa" data-field="PackageFullTitle">
                      -
                    </p>
                </div>

                <div class="ui-receipt-table">
                  <table class="uk-table uk-table-divider fontface-vazir-fa">
                    <tbody>
                      <tr>
                        <td class="uk-text-muted">مبلغ</td>
                        <td class="uk-text-left" data-field="Amount">—</td>
                      </tr>
                      <tr>
                        <td class="uk-text-muted">برای شماره</td>
                        <td class="uk-text-left" dir="ltr" data-field="CellNumber">—</td>
                      </tr>
                      <tr>
                        <td class="uk-text-muted">اپراتور</td>
                        <td class="uk-text-left" data-field="OperatorName">—</td>
                      </tr>
                      <tr>
                        <td class="uk-text-muted">پرداخت با کارت</td>
                        <td class="uk-text-left" data-field="SecurePan" dir="ltr">—</td>
                      </tr>
                      <tr>
                        <td class="uk-text-muted">تاریخ و زمان</td>
                        <td class="uk-text-left" data-field="PayedOn" dir="ltr">—</td>
                      </tr>
                       <tr>
                        <td class="uk-text-muted">شماره پیگیری</td>
                        <td class="uk-text-left" data-field="TraceNo" dir="ltr">—</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <a href='./'
                  class="uk-button uk-button-primary uk-button-large uk-border-rounded uk-width-1-1">
                  بازگشت به خانه
              </a>
              </div>
    </script>
    <script id="FailedReceiptTemplate" type="text/template">
      <div class="uk-panel uk-margin-top">
                <div
                  class="uk-border-rounded uk-width-expand uk-text-center uk-margin-bottom
                         uk-flex uk-flex-column uk-flex-middle uk-flex-center ui-bg-light-green">
                  <div
                      class="uk-text-center uk-width-max-content uk-border-rounded uk-text-white ui-success-receipt-title">
                      <i class="ti ti-circle-x"></i>
                      تراکنش موفق
                    </div>
                  <p class="uk-text-large uk-padding-small" data-field="PackageFullTitle">—</p>
                </div>
                <a href='./'
                  class="uk-button uk-button-primary uk-button-large uk-border-rounded uk-width-1-1">
                  بازگشت به خانه
              </a>
              </div>
    </script>

    <script src="../../cdn/pkg/jquery/js/jquery.min.js" as="script"></script>
    <script
      src="../../cdn/pkg/jquery/js/jquery-mask.min.js"
      as="script"
    ></script>
    <script
      src="../../cdn/pkg/bootstrap/js/bootstrap.bundle.min.js"
      as="script"
    ></script>
    <script src="./dist/ui/vendor/validate.min.js" as="script"></script>
    <script src="./dist/ui/vendor/validateMessages.js" as="script"></script>
    <script src="./dist/ui/vendor/validateMethods.min.js" as="script"></script>
    <script src="./dist/ui/vendor/rdirect.min.js" as="script"></script>
    <script src="../../cdn/pkg/sep/overall/js/helper.js" as="script"></script>
    <script src="./config.js" as="script"></script>
    <script src="./dist/ui/js/main.js" as="script"></script>
    <script src="./dist/ui/js/app.js" as="script" defer></script>
    <script>

      function showSuccessReceipt(detail, tx) {
       const data = {
            PackageFullTitle: hasValue(detail.TopUpDescription) ? detail.TopUpDescription.trim() : '-',
            Amount: hasValue(detail.Amount) ? detail.Amount : '-',
            CellNumber: hasValue(detail.CellNumber) ? detail.CellNumber.trim() : '-',
            OperatorName: hasValue(operatorTypes[detail.OperatorCode]) ? operatorTypes[detail.OperatorCode].trim() : '-',
            SecurePan: hasValue(tx.SecurePan) ? tx.SecurePan.trim() : '-',
            PayedOn: hasValue(tx.PayedOn) ? tx.PayedOn.trim() : '-',
            TraceNo: hasValue(tx.TraceNo) ? tx.TraceNo.trim() : '-',
};

        const html = $("#SuccessReceiptTemplate").html();
        const $template = $("<div>").html(html);
        $template.find('p[data-field="PackageFullTitle"]').text(data.PackageFullTitle);
        $template.find('td[data-field="Amount"]').text(data.Amount);
        $template.find('td[data-field="CellNumber"]').text(data.CellNumber);
        $template.find('td[data-field="OperatorName"]').text(data.OperatorName);
        $template.find('td[data-field="SecurePan"]').text(data.SecurePan);
        $template.find('td[data-field="PayedOn"]').text(data.PayedOn);
        $template.find('td[data-field="TraceNo"]').text(data.TraceNo);

        $("#ReceiptContainer").empty().append($template.children());
      }

      const qs = new URLSearchParams(window.location.search);
      const token = qs.get("token");
      const resNum = qs.get("resNum");
      if (!token || !resNum) {
        console.error("پارامترهای موردنیاز یافت نشد.");
      } else {
        $.ajax({
          url: "http://172.31.51.12:43197/api/v1/ipg-top-up/get-receipt",
          method: "GET",
          data: { token, ResNum: resNum },
          dataType: "json",
        })
          .done((resp) => {
            if (resp.IsSuccess && resp.Code === 2000) {
              const { Detail, Transaction } = resp.Data;
              if (Detail.TopUpSuccess) {
                showSuccessReceipt(Detail, Transaction);
              } else {
                showFailure(resp.Data.Detail.TopUpDescription);
              }
            } else {
              showFailure(resp.ErrorDetails || resp.Title);
            }
          })
          .fail((err) => {
            console.error(err);
            showFailure("خطا در برقراری ارتباط با سرور.");
          });
      }

    </script>
  </body>
</html>
